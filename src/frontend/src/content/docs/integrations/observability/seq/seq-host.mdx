---
title: Seq hosting integration
description: Learn how to use the Seq hosting integration to add a Seq resource to your AppHost.
---

import InstallPackage from '@components/InstallPackage.astro';
import { Aside } from '@astrojs/starlight/components';
import { Image } from 'astro:assets';
import seqIcon from '@assets/icons/seq-icon.png';

<Image
  src={seqIcon}
  alt="Seq logo"
  width={80}
  height={80}
  class:list={'float-inline-left icon'}
  data-zoom-off
/>

The Seq hosting integration models a Seq resource as the `SeqResource` type. To access this type and APIs, add the [ðŸ“¦ Aspire.Hosting.Seq](https://www.nuget.org/packages/Aspire.Hosting.Seq) NuGet package in your AppHost project:

<InstallPackage packageName="Aspire.Hosting.Seq" />

## Add a Seq resource

In your AppHost project, call `AddSeq` to add and return a Seq resource builder:

```csharp title="C# â€” AppHost.cs"
var builder = DistributedApplication.CreateBuilder(args);

var seq = builder.AddSeq("seq")
                 .ExcludeFromManifest()
                 .WithLifetime(ContainerLifetime.Persistent)
                 .WithEnvironment("ACCEPT_EULA", "Y");

var myService = builder.AddProject<Projects.ExampleProject>()
                       .WithReference(seq)
                       .WaitFor(seq);
```

<Aside type="note">
  The Seq container may be slow to start, so it's best to use a _persistent_
  lifetime to avoid unnecessary restarts. For more information, see [Container
  resource
  lifetime](/architecture/resource-model/#built-in-resources-and-lifecycle).
</Aside>

### Accept the Seq End User License Agreement (EULA)

You must accept the [Seq EULA](https://datalust.co/doc/eula-current.pdf) for Seq to start. To accept the agreement in code, pass the environment variable `ACCEPT_EULA` to the Seq container, and set its value to `Y`.

### Seq in the Aspire manifest

Seq shouldn't be part of the Aspire deployment manifest, hence the chained call to `ExcludeFromManifest`. It's recommended you set up a secure production Seq server outside of Aspire for your production environment.

## Persistent logs and traces

Register Seq with a data directory in your AppHost project to retain Seq's data and configuration across application restarts:

```csharp
var seq = builder.AddSeq("seq", seqDataDirectory: "./seqdata")
                 .ExcludeFromManifest()
                 .WithLifetime(ContainerLifetime.Persistent);
```

The directory specified must already exist.

## Add a Seq resource with a data volume

To add a data volume to the Seq resource, call the `WithDataVolume` method:

```csharp title="C# â€” AppHost.cs"
var builder = DistributedApplication.CreateBuilder(args);

var seq = builder.AddSeq("seq")
                 .WithDataVolume()
                 .ExcludeFromManifest()
                 .WithLifetime(ContainerLifetime.Persistent);

var myService = builder.AddProject<Projects.ExampleProject>()
                       .WithReference(seq)
                       .WaitFor(seq);
```

The data volume is used to persist the Seq data outside the lifecycle of its container.

## Connection properties

When you reference a Seq resource using `WithReference`, the following connection properties are made available to the consuming project:

### Seq

The Seq resource exposes the following connection properties:

| Property Name | Description                                                |
| ------------- | ---------------------------------------------------------- |
| `Host`        | The hostname or IP address of the Seq server               |
| `Port`        | The port number the Seq server is listening on             |
| `Uri`         | The connection URI, with the format `http://{Host}:{Port}` |

**Example connection string:**

```
Uri: http://localhost:5341
```

<Aside type="note">
  Aspire exposes each property as an environment variable named
  `[RESOURCE]_[PROPERTY]`. For instance, the `Uri` property of a resource called
  `seq` becomes `SEQ_URI`.
</Aside>
