---
title: Get started with the MongoDB Entity Framework Core integration
description: Learn how to set up the Aspire MongoDB Entity Framework Core integration.
prev: false
---

import { Image } from 'astro:assets';
import InstallPackage from '@components/InstallPackage.astro';
import InstallDotNetPackage from '@components/InstallDotNetPackage.astro';
import { Aside, CardGrid, LinkCard } from '@astrojs/starlight/components';
import mongodbIcon from '@assets/icons/mongodb-icon.png';

<Image
  src={mongodbIcon}
  alt="MongoDB logo"
  width={100}
  height={100}
  class:list={'float-inline-left icon'}
  data-zoom-off
/>

[MongoDB](https://www.mongodb.com) is a NoSQL database that provides high performance, high availability, and easy scalability. The Aspire MongoDB Entity Framework Core (EF Core) integration provides a way to connect to existing MongoDB databases, or create new instances from the [`docker.io/library/mongo` container image](https://hub.docker.com/_/mongo).

In this introduction, you'll see how to install and use the Aspire MongoDB Entity Framework Core integration in a simple configuration. The same hosting integration is used with both the EF Core and the non-EF Core client integrations. If you already have this knowledge, see [MongoDB Hosting integration](/integrations/databases/mongodb/mongodb-host/) and [MongoDB EF Core client integration](/integrations/databases/mongodb/mongodb-efcore-client/) for full reference details.

<Aside type="note">
    To follow this guide, you must have created an Aspire solution to work with. To learn how to do that, see [Build your first Aspire app](/get-started/first-app/).
</Aside>

## Set up hosting integration

To begin, install the Aspire MongoDB Hosting integration in your Aspire AppHost project. This integration allows you to create and manage MongoDB database instances from your Aspire hosting projects:

<InstallPackage packageName="Aspire.Hosting.MongoDB" shortName="mongodb" />

Next, in the AppHost project, create instances of MongoDB server and database resources, then pass the database to the consuming client projects:

```csharp title="AppHost.cs"
var builder = DistributedApplication.CreateBuilder(args);

var mongo = builder.AddMongoDB("mongo")
    .WithLifetime(ContainerLifetime.Persistent);

var mongodb = mongo.AddDatabase("mongodb");

var exampleProject = builder.AddProject<Projects.ExampleProject>("apiservice")
    .WaitFor(mongodb)
    .WithReference(mongodb);
```

<Aside type="tip">
    This is the simplest implementation of MongoDB resources in the AppHost. There are many more options you can choose from to address your requirements. For full details, see [MongoDB Hosting integration](/integrations/databases/mongodb/mongodb-host/).
</Aside>

## Use the integration in client projects

Now that the hosting integration is ready, the next step is to install and configure the EF Core client integration in any projects that need to use it.

### Set up client projects

In each of these consuming client projects, install the Aspire MongoDB EF Core client integration:

<InstallDotNetPackage packageName="Aspire.MongoDB.EntityFrameworkCore" />

In the `Program.cs` file of your client-consuming project, call the `AddMongoDbContext` extension method on any `IHostApplicationBuilder` to register your `DbContext` subclass for use via the dependency injection container. The method takes a connection name parameter.

```csharp title="C# — Program.cs"
builder.AddMongoDbContext<MyDbContext>(connectionName: "mongodb");
```

<Aside type="tip">
    The `connectionName` parameter must match the name used when adding the MongoDB database resource in the AppHost project. For more information, see [Set up hosting integration](#set-up-hosting-integration).
</Aside>

### Use injected MongoDB properties

In the AppHost, when you used the `WithReference` method to pass a MongoDB database resource to a consuming client project, Aspire injects several configuration properties that you can use in the consuming project.

Aspire exposes each property as an environment variable named `[RESOURCE]_[PROPERTY]`. For instance, the `Host` property of a resource called `mongodb` becomes `MONGODB_HOST`.

Use the `GetValue()` method to obtain these environment variables in consuming projects:

```csharp title="C# - Obtain configuration properties"
string hostname = builder.Configuration.GetValue<string>("MONGODB_HOST");
string databasePort = builder.Configuration.GetValue<string>("MONGODB_PORT");
string databaseName = builder.Configuration.GetValue<string>("MONGODB_DATABASENAME");
```

<Aside type="tip">
    For the full set of properties that Aspire injects, see [Properties of the MongoDB resources](/integrations/databases/mongodb/mongodb-efcore-client/#properties-of-the-mongodb-resources).
</Aside>

### Use MongoDB resources in client code

Now that you've added the `DbContext` to the builder in the consuming project, you can use the MongoDB resource to get and store data. Get the `DbContext` instance using dependency injection. For example, to retrieve your database context object from an example service define it as a constructor parameter and ensure the `ExampleService` class is registered with the dependency injection container:

```csharp title="C# — ExampleService.cs"
public class ExampleService(MyDbContext context)
{
    // Use context to interact with the database...
}
```

Having obtained the database context, you can work with the MongoDB database as you would in any other C# application using EF Core.

## Next steps

Now that you have an Aspire app with MongoDB EF Core integration up and running, you can use the following reference documents to learn how to configure and interact with the MongoDB resources:

<CardGrid>
  <LinkCard
    title="Understand the MongoDB hosting integration"
    description="Configure persistence, MongoDB Express, and more."
    href="/integrations/databases/mongodb/mongodb-host/"
  />
  <LinkCard
    title="Understand the MongoDB EF Core client integration"
    description="Enrich DbContext, configure settings, and more."
    href="/integrations/databases/mongodb/mongodb-efcore-client/"
  />
  <LinkCard
    title="Understand the MongoDB client integration"
    description="Learn about the MongoDB Driver client integration."
    href="/integrations/databases/mongodb/mongodb-client/"
  />
</CardGrid>
