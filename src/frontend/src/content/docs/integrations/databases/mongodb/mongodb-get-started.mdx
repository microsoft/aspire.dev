---
title: Get started with the MongoDB integrations
description: Learn how to set up the Aspire MongoDB Hosting and Client integrations simply.
prev: false
---

import { Image } from 'astro:assets';
import { Kbd } from 'starlight-kbd/components';
import InstallPackage from '@components/InstallPackage.astro';
import InstallDotNetPackage from '@components/InstallDotNetPackage.astro';
import { Aside, CardGrid, LinkCard, Code, Steps, Tabs, TabItem } from '@astrojs/starlight/components';
import PivotSelector from '@components/PivotSelector.astro';
import Pivot from '@components/Pivot.astro';
import ThemeImage from '@components/ThemeImage.astro';
import mongodbIcon from '@assets/icons/mongodb-icon.png';

<Image
  src={mongodbIcon}
  alt="MongoDB logo"
  width={100}
  height={100}
  class:list={'float-inline-left icon'}
  data-zoom-off
/>

[MongoDB](https://www.mongodb.com) is a NoSQL database that provides high performance, high availability, and easy scalability. The MongoDB integration enables you to connect to existing MongoDB instances (including [MongoDB Atlas](https://mdb.link/atlas)) or create new instances from Aspire with the `docker.io/library/mongo` container image.

In this introduction, you'll see how to install and use the Aspire MongoDB integrations in a simple configuration. If you already have this knowledge, see [MongoDB Hosting integration](/integrations/databases/mongodb/mongodb-host/) for full reference details.

<Aside type="note">
    To follow this guide, you must have created an Aspire solution to work with. To learn how to do that, see [Build your first Aspire app](/get-started/first-app/).
</Aside>

## Set up hosting integration

To begin, install the Aspire MongoDB Hosting integration in your Aspire AppHost project. This integration allows you to create and manage MongoDB database instances from your Aspire hosting projects:

<InstallPackage packageName="Aspire.Hosting.MongoDB" shortName="mongodb" />

Next, in the AppHost project, create instances of MongoDB server and database resources, then pass the database to the consuming client projects:

<PivotSelector
    title="Select your programming language to get started"
    key="lang"
    options={[
        { id: "csharp", title: "C#" },
        { id: "python", title: "Python" },
        { id: "javascript", title: "JavaScript" },
    ]}
/>

<Pivot id="csharp">

```csharp title="C# — AppHost.cs"
var builder = DistributedApplication.CreateBuilder(args);

var mongo = builder.AddMongoDB("mongo")
                   .WithLifetime(ContainerLifetime.Persistent);

var mongodb = mongo.AddDatabase("mongodb");

var exampleProject = builder.AddProject<Projects.ExampleProject>("apiservice")
                            .WaitFor(mongodb)
                            .WithReference(mongodb);
```

</Pivot>

<Pivot id="python">

```csharp title="C# — AppHost.cs"
var builder = DistributedApplication.CreateBuilder(args);

var mongo = builder.AddMongoDB("mongo")
                   .WithLifetime(ContainerLifetime.Persistent);

var mongodb = mongo.AddDatabase("mongodb");

var exampleProject = builder.AddUvicornApp("api", "./api", "main:app")
                            .WithExternalHttpEndpoints()
                            .WaitFor(mongodb)
                            .WithReference(mongodb);
```

</Pivot>

<Pivot id="javascript">

```csharp title="C# — AppHost.cs"
var builder = DistributedApplication.CreateBuilder(args);

var mongo = builder.AddMongoDB("mongo")
                   .WithLifetime(ContainerLifetime.Persistent);

var mongodb = mongo.AddDatabase("mongodb");

var api = builder.AddNodeApp("api", "./api", scriptPath: "index.js")
                 .WithExternalHttpEndpoints()
                 .WaitFor(mongodb)
                 .WithReference(mongodb);
```

</Pivot>

<Aside type="tip">
    This is the simplest implementation of MongoDB resources in the AppHost. There are many more options you can choose from to address your requirements. For full details, see [MongoDB Hosting integration](/integrations/databases/mongodb/mongodb-host/).
</Aside>

## Use the integration in client projects

Now that the hosting integration is ready, the next step is to install and configure the client integration in any projects that need to use it.

### Set up client projects

<Pivot id="csharp">

In each of these consuming client projects, install the Aspire MongoDB client integration:

<InstallDotNetPackage packageName="Aspire.MongoDB.Driver" />

<Aside type="danger">
The `Aspire.MongoDB.Driver` NuGet package depends on the `MongoDB.Driver` NuGet package. With the release of version 3.0.0 of `MongoDB.Driver`, a binary breaking change was introduced. To address this, a new client integration package, `Aspire.MongoDB.Driver.v3`, was created. The original `Aspire.MongoDB.Driver` package continues to reference `MongoDB.Driver` version 2.30.0. The new `Aspire.MongoDB.Driver.v3` package references `MongoDB.Driver` version 3.0.0. In a future version of Aspire, the `Aspire.MongoDB.Driver` will be updated to version 3.x and the `Aspire.MongoDB.Driver.v3` package will be deprecated. For more information, see [Upgrade to version 3.0](https://www.mongodb.com/docs/drivers/csharp/v3.0/upgrade/v3/).
</Aside>

In the `Program.cs` file of your client-consuming project, call the `AddMongoDBClient` extension method on any `IHostApplicationBuilder` to register a `IMongoClient` for use via the dependency injection container. The method takes a connection name parameter.

```csharp title="C# — Program.cs"
builder.AddMongoDBClient(connectionName: "mongodb");
```

<Aside type="tip">
    The `connectionName` parameter must match the name used when adding the MongoDB database resource in the AppHost project. For more information, see [Set up hosting integration](#set-up-hosting-integration).
</Aside>

</Pivot>

<Pivot id="python">

To interact with MongoDB databases in your Python consuming projects, you need to include a MongoDB client library. The official option is `pymongo`, which is MongoDB's Python driver. You can install this library using pip:

```bash
pip install pymongo
```

Ensure that you import the `MongoClient` in code files that interact with the database. You should also import the `os` module to access environment variables:

```python title="Python - Import pymongo"
from pymongo import MongoClient
import os
```

</Pivot>

<Pivot id="javascript">

To interact with MongoDB databases in your JavaScript consuming projects, you need to include a MongoDB client library. The official option is `mongodb`, which is MongoDB's Node.js driver. You can install this library using npm:

```bash
npm install mongodb
```

Ensure that you import the `MongoClient` in code files that interact with the database:

```javascript title="JavaScript - Import mongodb"
const { MongoClient } = require('mongodb');
```

</Pivot>

### Use injected MongoDB properties

In the AppHost, when you used the `WithReference` method to pass a MongoDB database resource to a consuming client project, Aspire injects several configuration properties that you can use in the consuming project.

Aspire exposes each property as an environment variable named `[RESOURCE]_[PROPERTY]`. For instance, the `Uri` property of a resource called `mongodb` becomes `MONGODB_URI`.

<Pivot id="csharp">

Use the `GetValue()` method to obtain these environment variables in consuming projects:

```csharp title="C# - Obtain configuration properties"
string connectionUri = builder.Configuration.GetConnectionString("mongodb");
string host = builder.Configuration.GetValue<string>("MONGODB_HOST");
string databaseName = builder.Configuration.GetValue<string>("MONGODB_DATABASENAME");
```

</Pivot>

<Pivot id="python">

Use the `os.getenv()` method to obtain these environment variables in consuming projects:

```python title="Python - Obtain configuration properties"
connection_uri = os.getenv("ConnectionStrings__mongodb")
host = os.getenv("MONGODB_HOST")
port = os.getenv("MONGODB_PORT")
username = os.getenv("MONGODB_USERNAME")
password = os.getenv("MONGODB_PASSWORD")
database_name = os.getenv("MONGODB_DATABASENAME")
```

</Pivot>

<Pivot id="javascript">

Use the `process.env` method to obtain these environment variables in consuming projects:

```javascript title="JavaScript - Obtain configuration properties"
const connectionUri = process.env.ConnectionStrings__mongodb;
const host = process.env.MONGODB_HOST;
const port = process.env.MONGODB_PORT;
const username = process.env.MONGODB_USERNAME;
const password = process.env.MONGODB_PASSWORD;
const databaseName = process.env.MONGODB_DATABASENAME;
```

</Pivot>

<Aside type="tip">
    The full set of properties that Aspire injects depends on the MongoDB resource configuration. For more information, see [Properties of the MongoDB resources](/integrations/databases/mongodb/mongodb-client/#properties-of-the-mongodb-resources).
</Aside>

### Use MongoDB resources in client code

<Pivot id="csharp">

Now that you've added the `IMongoClient` to the builder in the consuming project, you can use the MongoDB database. Get the `IMongoClient` instance using dependency injection. For example, to retrieve your client object from an example service, define it as a constructor parameter and ensure the `ExampleService` class is registered with the dependency injection container:

```csharp title="C# — ExampleService.cs"
public class ExampleService(IMongoClient client)
{
    // Use MongoDB client...
}
```

Alternatively, if you defined a MongoDB database resource in your AppHost, you can instead require that the dependency injection container provides an `IMongoDatabase` instance:

```csharp title="C# — ExampleService.cs"
public class ExampleService(IMongoDatabase database)
{
    // Use MongoDB database...
}
```

Having obtained the client or database, you can work with the MongoDB database as you would in any other C# application.

</Pivot>

<Pivot id="python">

Use the information you have obtained about the MongoDB resource to connect to the database. Here is an example of how to connect using `pymongo`:

```python title="Python - Connect to MongoDB"
# Create MongoDB client using connection URI
client = MongoClient(connection_uri)

# Get database
db = client[database_name]

# Verify connection
print(f"Connected to MongoDB database: {database_name}")
```

Having obtained the client, you can work with the MongoDB database as you would in any other Python application.

</Pivot>

<Pivot id="javascript">

Use the information you have obtained about the MongoDB resource to connect to the database. Here is an example of how to connect using the `mongodb` package:

```javascript title="JavaScript - Connect to MongoDB"
// Create MongoDB client using connection URI
const client = new MongoClient(connectionUri);

// Connect to MongoDB
await client.connect();

// Get database
const db = client.db(databaseName);

// Verify connection
console.log(`Connected to MongoDB database: ${databaseName}`);
```

Having obtained the client, you can work with the MongoDB database as you would in any other JavaScript application.

</Pivot>

## Next steps

Now, that you have an Aspire app with MongoDB integrations up and running, you can use the following reference documents to learn how to configure and interact with the MongoDB resources:

<CardGrid>
  <LinkCard
    title="Understand the MongoDB hosting integration"
    description="Discover how to configure data volumes, MongoDB Express, and more."
    href="/integrations/databases/mongodb/mongodb-host/"
  />
  <LinkCard
    title="Understand the MongoDB client integration"
    description="Learn about the MongoDB client integration, including connection strings and observability."
    href="/integrations/databases/mongodb/mongodb-client/"
  />
  <LinkCard
    title="Community extensions"
    description="Explore community-contributed extensions for MongoDB, including DbGate management UI."
    href="/integrations/databases/mongodb/mongodb-extensions/"
  />
</CardGrid>
