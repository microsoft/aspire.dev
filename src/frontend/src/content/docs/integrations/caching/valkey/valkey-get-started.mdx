---
title: Get started with the Valkey integration
description: Learn how to set up the Aspire Valkey hosting and client integrations simply.
prev: false
---

import InstallPackage from '@components/InstallPackage.astro';
import InstallDotNetPackage from '@components/InstallDotNetPackage.astro';
import { Aside } from '@astrojs/starlight/components';
import { Image } from 'astro:assets';
import valkeyIcon from '@assets/icons/valkey-icon.png';

<Image
  src={valkeyIcon}
  alt="Valkey logo"
  width={100}
  height={100}
  class:list={'float-inline-left icon'}
  data-zoom-off
/>

[Valkey](https://valkey.io/) is a Redis fork and complies with the Redis serialization protocol (RESP). It's a high-performance key/value datastore that supports a variety of workloads such as caching, message queues, and can act as a primary database. The Valkey integration enables you to connect to existing Valkey instances, or create new instances from Aspire with the `docker.io/valkey/valkey` container image.

In this introduction, you'll see how to install and use the Aspire Valkey integrations in a simple configuration. If you already have this knowledge, see [Valkey hosting integration](/integrations/caching/valkey/valkey-host/) for full reference details.

<Aside type="note">
    To follow this guide, you must have created an Aspire solution to work with. To learn how to do that, see [Build your first Aspire app](../../../../get-started/first-app/).
</Aside>

## Set up hosting integration

To begin, install the Aspire Valkey hosting integration in your Aspire AppHost project:

<InstallPackage packageName="Aspire.Hosting.Valkey" />

Next, in the AppHost project, create instances of Valkey resources and pass them to the consuming client projects:

```csharp title="C# â€” AppHost.cs"
var builder = DistributedApplication.CreateBuilder(args);

var cache = builder.AddValkey("cache");

var myService = builder.AddProject<Projects.ExampleProject>()
                       .WithReference(cache);

builder.Build().Run();
```

When Aspire adds a container image to the AppHost, it creates a new Valkey instance on your local machine.

<Aside type="tip">
  If you'd rather connect to an existing Valkey instance, call `AsExisting`
  instead.
</Aside>

## Set up client integration

Valkey is Redis-compatible, so you use the same Redis client packages. To get started, install the package:

<InstallDotNetPackage packageName="Aspire.StackExchange.Redis" />

In the `Program.cs` file of your client-consuming project, call the `AddRedisClient` extension method to register an `IConnectionMultiplexer`:

```csharp
builder.AddRedisClient(connectionName: "cache");
```

<Aside type="tip">
  The `connectionName` parameter must match the name used when adding the Valkey
  resource in the AppHost project.
</Aside>

You can then retrieve the `IConnectionMultiplexer` instance using dependency injection:

```csharp
public class ExampleService(IConnectionMultiplexer connectionMux)
{
    // Use connection multiplexer...
}
```

## See also

- [Valkey hosting integration](/integrations/caching/valkey/valkey-host/)
- [Valkey client integration](/integrations/caching/valkey/valkey-client/)
- [Redis integration](/integrations/caching/redis/redis-get-started/)
