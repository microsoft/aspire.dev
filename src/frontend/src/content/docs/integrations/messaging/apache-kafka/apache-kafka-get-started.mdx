---
title: Get started with the Apache Kafka integration
description: Learn how to set up the Aspire Apache Kafka hosting and client integrations simply.
prev: false
---

import InstallPackage from '@components/InstallPackage.astro';
import InstallDotNetPackage from '@components/InstallDotNetPackage.astro';
import { Aside } from '@astrojs/starlight/components';
import { Image } from 'astro:assets';
import kafkaIcon from '@assets/icons/apache-kafka-icon.svg';

<Image
  src={kafkaIcon}
  alt="Apache Kafka logo"
  width={100}
  height={100}
  class:list={'float-inline-left icon'}
  data-zoom-off
/>

[Apache Kafka](https://kafka.apache.org/) is a distributed streaming platform that enables you to build real-time data pipelines and streaming applications. The Aspire Apache Kafka integration enables you to connect to existing Kafka instances or create new instances from Aspire with the [`confluentinc/confluent-local` container image](https://hub.docker.com/r/confluentinc/confluent-local).

In this introduction, you'll see how to install and use the Aspire Apache Kafka integrations in a simple configuration. If you already have this knowledge, see [Apache Kafka hosting integration](/integrations/messaging/apache-kafka/apache-kafka-host/) for full reference details.

<Aside type="note">
    To follow this guide, you must have created an Aspire solution to work with. To learn how to do that, see [Build your first Aspire app](../../../../get-started/first-app/).
</Aside>

## Set up hosting integration

To begin, install the Aspire Kafka hosting integration in your Aspire AppHost project:

<InstallPackage packageName="Aspire.Hosting.Kafka" />

Next, in the AppHost project, create instances of Kafka resources and pass them to the consuming client projects:

```csharp title="C# â€” AppHost.cs"
var builder = DistributedApplication.CreateBuilder(args);

var kafka = builder.AddKafka("kafka");

builder.AddProject<Projects.ExampleProject>()
       .WithReference(kafka);

builder.Build().Run();
```

When Aspire adds a container image to the AppHost, it creates a new Kafka server instance on your local machine.

<Aside type="tip">
If you'd rather connect to an existing Kafka server, call `AddConnectionString` instead. For more information on how to use `WithReference`, see [Resource dependencies](/get-started/resources/) and [Configuration injection](/get-started/app-host/).
</Aside>

## Set up client integration

To get started with the Aspire Apache Kafka client integration, install the package:

<InstallDotNetPackage packageName="Aspire.Confluent.Kafka" />

In the `Program.cs` file of your client-consuming project, call the `AddKafkaProducer` extension method to register an `IProducer<TKey, TValue>` for use via the dependency injection container:

```csharp
builder.AddKafkaProducer<string, string>("kafka");
```

<Aside type="tip">
The `connectionName` parameter must match the name used when adding the Kafka resource in the AppHost project.
</Aside>

You can then retrieve the `IProducer<TKey, TValue>` instance using dependency injection:

```csharp
internal sealed class Worker(IProducer<string, string> producer) : BackgroundService
{
    // Use producer...
}
```

## See also

- [Apache Kafka hosting integration](/integrations/messaging/apache-kafka/apache-kafka-host/)
- [Apache Kafka client integration](/integrations/messaging/apache-kafka/apache-kafka-client/)
