---
title: Deploy using the Aspire CLI
description: Learn how to deploy Aspire applications to Azure Container Apps using the aspire deploy command.
---

import { Aside, Code, Steps } from '@astrojs/starlight/components';
import { Kbd } from 'starlight-kbd/components';
import InstallPackage from '@components/InstallPackage.astro';
import LearnMore from '@components/LearnMore.astro';
import OsAwareTabs from '@components/OsAwareTabs.astro';

When you deploy Aspire applications to Azure Container Apps using the `aspire deploy` command, the platform provides several deployment options and configurations. This guide explains how to use the Aspire CLI to deploy your applications to Azure Container Apps. For general information about deploying Aspire applications, see [Aspire deployment overview](/deployment/overview/).

## Prerequisites

- Aspire common [prerequisites](/get-started/prerequisites/)
- The [Aspire CLI](/get-started/install-cli/) installed
- An Azure subscription: [Create one for free](https://azure.microsoft.com/free/)
- Install the [Azure CLI](https://learn.microsoft.com/cli/azure/install-azure-cli)

## Authenticate with Azure

Before deploying, you must authenticate with Azure CLI. Run the following command:

```bash title="Authenticate with Azure CLI"
az login
```

This command opens a web browser for you to sign in with your Azure credentials. The `aspire deploy` command automatically validates your Azure CLI authentication before proceeding with deployment. For more information, see:

- [Sign in with Azure CLI](https://learn.microsoft.com/cli/azure/authenticate-azure-cli)
- [The `aspire deploy` command reference](/reference/cli/commands/aspire-deploy/)

## Create an Aspire project

If you don't already have an Aspire project, create one using the Aspire CLI:

<Steps>

1. Open a terminal or command prompt.
1. Run the following commands to create a new Aspire project:

    ```bash title="Create new Aspire project"
    aspire new aspire-starter --name AspireDeploy
    ```
1. Navigate to the project directory:

    ```bash title="Navigate to project directory"
    cd AspireDeploy
    ```

</Steps>

For more details on creating projects, see [Build your first Aspire project](/get-started/first-app/).

## Configure for Azure Container Apps

To deploy to Azure Container Apps, add a package reference to your AppHost project that includes the [üì¶ Aspire.Hosting.Azure.AppContainers](https://www.nuget.org/packages/Aspire.Hosting.Azure.AppContainers) NuGet package:

<InstallPackage packageName="Aspire.Hosting.Azure.AppContainers" />

In your AppHost project's _AppHost.cs_ file, add the Container Apps environment:

```csharp title="AppHost.cs" {3-4}
var builder = DistributedApplication.CreateBuilder(args);

// Add Azure Container Apps environment
builder.AddAzureContainerAppEnvironment("aspire-env");

var apiService = builder.AddProject<Projects.AspireDeploy_ApiService>("apiservice")
    .WithHttpHealthCheck("/health");

builder.AddProject<Projects.AspireDeploy_Web>("webfrontend")
    .WithExternalHttpEndpoints()
    .WithHttpHealthCheck("/health")
    .WithReference(apiService)
    .WaitFor(apiService);

builder.Build().Run();
```

For more information, see [Configure Azure Container Apps environments](/integrations/cloud/azure/configure-container-apps/).

### Resource naming

Azure Container Apps have specific naming requirements that Aspire handles automatically during deployment. Resource names must be lowercase, alphanumeric, and between 2-32 characters. When you define resources in your AppHost, Aspire generates valid Azure resource names based on your provided names.

## Deploy with aspire deploy

Once your project is configured, deploy it using the `aspire deploy` command:

```bash title="Deploy to Azure Container Apps"
aspire deploy
```

<Aside type="tip">
  The `aspire deploy` command is interactive by default. To deploy without prompts, set these environment variables first:

  - `Azure__SubscriptionId`: Target Azure subscription ID.
  - `Azure__Location`: Azure region (for example, `eastus`).
  - `Azure__ResourceGroup`: Resource group name to create or reuse.
</Aside>

## Deployment process

The `aspire deploy` command performs the following steps automatically. First, the command validates that you're authenticated with Azure CLI. If you're not logged in, you'll see an error message prompting you to run `az login`.

### Interactive prompts

The deployment process prompts you interactively to select your Azure tenant, subscription, and resource group. Use the <Kbd windows="‚Üë" mac="‚Üë" /> and <Kbd windows="‚Üì" mac="‚Üì" /> keys to navigate the options, or press the corresponding number key (<Kbd windows="1" mac="1" />, <Kbd windows="2" mac="2" />, etc.) to jump directly to an option. Press <Kbd windows="Enter" mac="Return" /> to confirm your selection.

```txt title="Tenant and subscription selection" data-disable-copy
(validate-azure-login) ‚úì Azure CLI authentication validated successfully
(fetch-tenant) ‚Üí Fetching available tenants
(fetch-tenant) ‚úì Found 3 available tenant(s)
Select your Azure tenant:
Tenant ID:  Default Directory (yourname.onmicrosoft.com) ‚Äî xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
(fetch-subscription) ‚Üí Fetching available subscriptions
(fetch-subscription) ‚úì Found 1 available subscription(s)
Select your Azure subscription:
Subscription ID:  Visual Studio Enterprise (xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx)
(fetch-resource-groups) ‚Üí Fetching resource groups
(fetch-resource-groups) ‚úì Found 2 resource group(s)
Select your Azure resource group or enter a new name:
Resource group:  my-resource-group
```

<LearnMore>
For more information about the interactive prompts, see [Interaction service](/extensibility/interaction-service/).
</LearnMore>

### Build and provision

After selections are made, Aspire builds container images and provisions Azure infrastructure in parallel:

```txt title="Building and provisioning" data-disable-copy
(build-apiservice) ‚Üí Starting build-apiservice...
(build-webfrontend) ‚Üí Starting build-webfrontend...
(build-apiservice) i [INF] Building container image for resource apiservice
(build-webfrontend) i [INF] Building container image for resource webfrontend
(build-webfrontend) i [INF] Building image for webfrontend completed
(build-webfrontend) ‚úì build-webfrontend completed successfully
(build-apiservice) i [INF] Building image for apiservice completed
(build-apiservice) ‚úì build-apiservice completed successfully
(provision-aspire-env-acr) ‚Üí Deploying aspire-env-acr
(provision-aspire-env-acr) ‚úì Successfully provisioned aspire-env-acr (15.2s)
(provision-aspire-env) ‚Üí Deploying aspire-env
```

### Push to Container Registry

Once images are built and the Azure Container Registry is provisioned, the CLI authenticates and pushes your images:

```txt title="Pushing images" data-disable-copy
(login-to-acr-aspire-env-acr) ‚Üí Logging in to aspireenvacrabcd1234xyz
(login-to-acr-aspire-env-acr) ‚úì Successfully logged in to aspireenvacrabcd1234xyz.azurecr.io (4.6s)
(push-webfrontend) ‚Üí Pushing webfrontend to aspireenvacrabcd1234xyz
(push-apiservice) ‚Üí Pushing apiservice to aspireenvacrabcd1234xyz
(push-webfrontend) ‚úì Successfully pushed webfrontend to aspireenvacrabcd1234xyz.azurecr.io/webfrontend:aspire-deploy-20260128154830 (78.5s)
(push-apiservice) ‚úì Successfully pushed apiservice to aspireenvacrabcd1234xyz.azurecr.io/apiservice:aspire-deploy-20260128154830 (79.7s)
```

### Deployment complete

Upon successful deployment, you'll see a summary of all steps completed:

```txt title="Pipeline success" data-disable-copy
------------------------------------------------------------
‚úì 24/24 steps succeeded ‚Ä¢ Total time: 4m 31s

Steps Summary:
      4m 31s  ‚úì pipeline-execution
      3m 24s  ‚úì provision-aspire-env
      1m 20s  ‚úì push-apiservice
      1m 19s  ‚úì push-webfrontend
      27.14s  ‚úì create-provisioning-context
      22.62s  ‚úì provision-webfrontend-containerapp
      22.29s  ‚úì provision-apiservice-containerapp
      15.18s  ‚úì provision-aspire-env-acr
      13.18s  ‚úì build-apiservice
      13.18s  ‚úì build-webfrontend
       4.60s  ‚úì login-to-acr-aspire-env-acr
       3.08s  ‚úì fetch-tenant
       2.01s  ‚úì validate-azure-login
       1.47s  ‚úì fetch-resource-groups
       1.08s  ‚úì fetch-subscription
      ...

‚úì PIPELINE SUCCEEDED
------------------------------------------------------------
```

<Aside type="note">
This is example output; actual resource names and deployment times will vary based on your environment.
</Aside>

<LearnMore>
For more information, see the [`aspire deploy` command reference](/reference/cli/commands/aspire-deploy/).
</LearnMore>

## Monitor deployment

During deployment, you can monitor progress through:

<Steps>

1. **Console output**: Real-time progress updates and status messages.
1. **Azure portal**: View resources being created in your resource group.
1. **Azure CLI**: Use `az containerapp list` to see deployed applications.

</Steps>

## Troubleshooting deployment

When using the `aspire deploy` command, you may encounter various issues during deployment. Use this section to learn common problems and tips for troubleshooting, helping you quickly identify and fix errors.

### Authentication issues

If you encounter authentication errors:

```plaintext title="Authentication error" data-disable-copy
‚ùå Azure CLI authentication failed. Please run 'az login' to authenticate before deploying.
```

Run `az login` and ensure you have the necessary permissions in your Azure subscription.

<LearnMore>
For more information, see [Sign in with Azure CLI](https://learn.microsoft.com/cli/azure/authenticate-azure-cli).
</LearnMore>

### Resource naming conflicts

If resource names conflict with existing Azure resources, modify your resource names in the AppHost:

```csharp title="Unique environment name" '"my-unique-env-name"'
// Change the environment name to a unique value
builder.AddAzureContainerAppEnvironment("my-unique-env-name");
```

### Container build failures

If container builds fail, ensure:

- Docker is running and accessible.
- Your project builds successfully locally: `dotnet build`.
- Container runtime is properly configured.

## Access your deployed application

After successful deployment:

<Steps>

1. **Aspire Dashboard**: Access the dashboard URL provided in the deployment output.
1. **Application endpoints**: Find your application URLs in the Azure portal under Container Apps.
1. **Azure CLI**: List endpoints using:

   <OsAwareTabs syncKey="terminal">
       <Code
           slot="unix"
           lang="bash"
           title="Get application endpoint"
           code={`az containerapp show \\
     --name <app-name> \\
     --resource-group <resource-group> \\
     --query properties.configuration.ingress.fqdn`}
       />
       <Code
           slot="windows"
           lang="powershell"
           title="Get application endpoint"
           code={`az containerapp show \`
     --name <app-name> \`
     --resource-group <resource-group> \`
     --query properties.configuration.ingress.fqdn`}
       />
   </OsAwareTabs>

</Steps>

## Clean up resources

To remove deployed resources, delete the resource group:

```bash title="Delete resource group"
az group delete --name <resource-group-name>
```

<Aside type="danger">
  This command deletes all resources in the resource group, including any
  resources not created by the Aspire CLI.
</Aside>

- [Aspire deployment overview](/deployment/overview/)
- [Configure Azure Container Apps environments](/integrations/cloud/azure/configure-container-apps/)
- [`aspire deploy` command reference](/reference/cli/commands/aspire-deploy/)
