---
title: Aspire Visual Studio Code 拡張機能
description: Aspire Visual Studio Code 拡張機能を使用して、Aspire ソリューションの作成、構成、実行、デプロイを行う方法を学びます。
---

import { Steps } from '@astrojs/starlight/components';
import ThemeImage from '@components/ThemeImage.astro';
import installExtension from '@assets/get-started/install-aspire-code-extension.png';
import installExtensionLight from '@assets/get-started/install-aspire-code-extension-light.png';
import createProject from '@assets/get-started/code-extension-create-aspire-project.png';
import createProjectLight from '@assets/get-started/code-extension-create-aspire-project-light.png';
import { Kbd } from 'starlight-kbd/components';

Aspire Visual Studio Code 拡張機能は、Visual Studio Code 内で Aspire を扱う作業を効率化するための一連のコマンドとツールを提供します。この拡張機能には、プロジェクトの作成、統合の追加、ソリューションの構成、デプロイの管理を行うためのコマンドが含まれています。また、この拡張機能は Aspire CLI を必要とし、Visual Studio Code のコマンドパレット上で同様の機能を提供します。

## 前提条件

Before you can use the Aspire Visual Studio Code extension, you need:
Aspire Visual Studio Code 拡張機能を使用するには、次が必要です。

- [Aspire CLI](/reference/cli/overview/) がインストールされており、PATH に含まれていること

## Aspire 拡張機能のインストール

Aspire VS Code 拡張機能をインストールするには、次の手順を実行します:

<Steps>

1. VS Code を開きます。
1. **表示** > **拡張機能** を選択するか、 <Kbd windows='Ctrl+Shift+X' mac='Cmd+Shift+X' /> を押して **拡張機能** ビューを開きます。
1. 拡張機能マーケットプレースで「aspire」を検索します。
1. **Microsoft** が公開している **Aspire** 拡張機能を選択します。
1. **インストール** を選択します。

</Steps>

<ThemeImage
  dark={installExtension}
  light={installExtensionLight}
  alt="拡張機能マーケットプレースから Aspire 拡張機能をインストールする方法を示した VS Code のスクリーンショット。"
/>

または、 [VS Code Marketplace](https://marketplace.visualstudio.com/items?itemName=microsoft-aspire.aspire-vscode) から拡張機能を直接インストールすることもできます。

## 拡張機能コマンドへのアクセス

Aspire 拡張機能のすべてのコマンドは、VS Code のコマンドパレットから利用できます:

<Steps>

1. <Kbd windows='Ctrl+Shift+P' mac='Cmd+Shift+P' /> を押してコマンドパレットを開きます。
1. 「Aspire」と入力して、利用可能なすべての Aspire コマンドを絞り込み表示します。
1. 一覧から目的のコマンドを選択します。

</Steps>

すべてのコマンドは、見つけやすいようにコマンドパレット内の **Aspire** カテゴリにまとめられています。

## 利用可能なコマンド

Aspire VS Code 拡張機能では、次のコマンドが提供されています:

| Command | Description | Availability |
|--|--|--|
| Aspire: New Aspire project | テンプレートから新しい Aspire apphost またはスターター アプリを作成します。 | 利用可能 |
| Aspire: Add an integration | Aspire apphost にホスティング統合 (`Aspire.Hosting.*`) を追加します。 | 利用可能 |
| Aspire: Configure launch.json | ワークスペースの `launch.json` に既定の Aspire デバッガー起動構成を追加します。これにより、ワークスペース内の apphost を検出して実行します。 | 利用可能 |
| Aspire: Manage configuration settings | 機能フラグを含む構成設定を管理します。 | 利用可能 |
| Aspire: Open Aspire terminal | Aspire プロジェクトで作業するための Aspire VS Code ターミナルを開きます。 | 利用可能 |
| Aspire: Publish deployment artifacts | Aspire apphost 用のデプロイ成果物を生成します。 | プレビュー |
| Aspire: Deploy app | Aspire apphost の内容を、定義されたデプロイ先にデプロイします。 | プレビュー |
| Aspire: Update integrations | apphost 内のホスティング統合および Aspire SDK を更新します。 | プレビュー |

## 新しい Aspire アプリを作成する

拡張機能を使用して新しい Aspire アプリを作成するには、次の手順を実行します:

<Steps>

1. コマンドパレットを開きます。 (<Kbd windows='Ctrl+Shift+P' mac='Cmd+Shift+P' />)
1. **Aspire: New Aspire project** コマンドを実行します。
1. 使用するテンプレートを選択します。
1. プロジェクト名と保存場所を指定します。

</Steps>

<ThemeImage
  dark={createProject}
  light={createProjectLight}
  alt="Aspire 拡張機能を使用してテンプレート オプションを表示し、新しい Aspire ソリューションを作成する方法を示した VS Code のスクリーンショット。"
/>

拡張機能によりプロジェクトが作成され、VS Code で開かれます。

## Aspire ソリューションに統合を追加する

Aspire の統合機能は、さまざまなクラウド サービスや依存関係への事前構成済みの接続を提供します。統合を追加するには、次の手順を実行します:

<Steps>

1. コマンドパレットを開きます。
1. **Aspire: Add an integration** コマンドを実行します。
1. 追加したい統合パッケージを参照するか、検索します。
1. 統合を選択して、AppHost プロジェクトに追加します。

</Steps>

拡張機能により、適切な NuGet パッケージ参照が AppHost プロジェクトに追加されます。

:::note
**Add an integration** コマンドは、AppHost プロジェクトにホスティング統合を追加します。対応するクライアント統合は、利用側のプロジェクトには追加されません。
:::

## Aspire ソリューションを構成する

Aspire 拡張機能には、開発時における Aspire および Aspire CLI の動作を構成するための複数のコマンドが含まれています:

### デバッグ用に launch.json を構成する

VS Code で Aspire アプリケーションを実行およびデバッグするには、 `launch.json` ファイルを構成する必要があります:

<Steps>

1. コマンドパレットを開きます。
1. **Aspire: Configure launch.json** コマンドを実行します。
1. 拡張機能により、既定の Aspire デバッガー構成がワークスペースの `launch.json` ファイルに追加されます。

</Steps>

既定の構成は次のとおりです:

```json title='.vscode/launch.json'
{
  "type": "aspire",
  "request": "launch",
  "name": "Aspire: Launch Default AppHost",
  "program": "${workspaceFolder}"
}
```

`program` フィールドは、特定の AppHost プロジェクト ファイルを指すようにカスタマイズできます。たとえば次のようになります:

```json title='.vscode/launch.json'
{
  "type": "aspire",
  "request": "launch",
  "name": "Aspire: Launch MyAppHost",
  "program": "${workspaceFolder}/MyAppHost/MyAppHost.csproj"
}
```

### 構成設定の管理

**Aspire: Manage configuration settings** コマンドは、 `aspire config` の要求オプションを実行し、その結果を VS Code のターミナルに表示します。  `get` および `set` コマンドを使用して Aspire CLI を構成できます。 `list` コマンドを使用すると、現在の構成値を表示できます。

## 開発モードで Aspire ソリューションを実行する

Aspire アプリケーションを開発モードで実行するには、次の手順を行います:

<Steps>

1. [デバッグ用に launch.json を構成する](#デバッグ用に-launchjson-を構成する) セクションで説明されているとおり、 `launch.json` が構成されていることを確認します。
1. **表示** > **実行** を選択するか、 <Kbd windows='Ctrl+Shift+D' mac='Cmd+Shift+D' /> を押して 「実行とデバッグ」 ビューを開きます。
1. ドロップダウンから Aspire の起動構成を選択します。
1. 緑色の **Start Debugging** ボタンを選択するか、 <Kbd windows='F5' /> を押します。

</Steps>

拡張機能は AppHost プロジェクトをビルドして起動し、Aspire ダッシュボードをブラウザーで開き、ソリューション内のすべてのリソースに対してデバッグを有効にします。

または、 `Aspire: Open Aspire terminal` を使用して Aspire VS Code ターミナルを開き、 `aspire run --start-debug-session` を実行することで、VS Code のデバッグ セッションを開始することもできます。

### エディターから実行またはデバッグする

ワークスペース内で AppHost プロジェクトが検出されると、エディターから直接実行またはデバッグすることもできます。AppHost ファイルを表示している際に、エディターのタイトル バーにある実行ボタンを使用してください。

## デプロイ成果物の発行

:::caution
この機能は **プレビュー** です。
:::

**Aspire: Publish deployment artifacts** コマンドは、Aspire AppHost 用のデプロイ成果物を生成します。このコマンドはリソースをディスクにシリアル化し、デプロイ ツールで利用できるようにします。

デプロイ成果物を発行するには、次の手順を実行します:

<Steps>

1. コマンドパレットを開きます。
1. **Aspire: Publish deployment artifacts** コマンドを実行します。
1. 生成された成果物の出力先を選択します。

</Steps>

このコマンドは、登録されている発行コールバック アノテーションを呼び出し、次のような成果物を生成します。:

- Azure リソース用の Bicep ファイル。
- Docker Compose の YAML ファイル。
- Kubernetes の Helm チャート。

Aspire の発行について詳しくは、[Aspire の発行とデプロイの概要](/ja/deployment/overview/)を参照してください。

## Aspire ソリューションをデプロイする

:::caution
この機能は **プレビュー** です。
:::

**Aspire: Deploy app host** コマンドは、Aspire AppHost の内容を、定義されているデプロイ先にデプロイします。

Aspire ソリューションをデプロイするには、次の手順を実行します:

<Steps>

1. コマンドパレットを開きます。
1. **Aspire: Deploy app host** コマンドを実行します。
1. プロンプトに従って、デプロイ先を選択し、必要な構成を指定します。

</Steps>

このコマンドはデプロイ成果物を発行した後、デプロイ コールバック アノテーションを呼び出して、指定されたデプロイ先にリソースをデプロイします。

Aspire のデプロイについて詳しくは、[Aspire の発行とデプロイの概要](/ja/deployment/overview/) を参照してください。

## Aspire ターミナルを開く

**Aspire: Open Aspire terminal** コマンドは、Aspire プロジェクトでの作業用に構成されたターミナル ウィンドウを開きます。このターミナルでは Aspire CLI コマンドに簡単にアクセスでき、適切な環境変数が事前に設定されています。

## フィードバックと問題の報告

Aspire VS Code 拡張機能に関する問題の報告や機能の要望を行うには、次の手順を実行します:

1. [Aspire GitHub リポジトリ](https://github.com/dotnet/aspire/issues) にアクセスします。
1. 新しい Issue を作成し、 `area-extension` ラベルを追加します。
