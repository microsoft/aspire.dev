---
title: æœ€åˆã®ãƒ†ã‚¹ãƒˆã‚’æ›¸ã
description: Learn how to test your Aspire solutions using xUnit.net, NUnit, and MSTest testing frameworks.
---

import { Aside, Steps } from '@astrojs/starlight/components';
import LearnMore from '@components/LearnMore.astro';
import PivotSelector from '@components/PivotSelector.astro';
import Pivot from '@components/Pivot.astro';

<PivotSelector
  title="ä½¿ç”¨ã™ã‚‹ãƒ†ã‚¹ãƒˆãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’é¸æŠã—ã¦ãã ã•ã„"
  key="testing-framework"
  options={[
    { id: 'xunit', title: 'xUnit.net' },
    { id: 'mstest', title: 'MSTest' },
    { id: 'nunit', title: 'NUnit' },
  ]}
/>

ã“ã®è¨˜äº‹ã§ã¯ã€Aspire ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³å‘ã‘ã«ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã—ã€C# ã§ãƒ†ã‚¹ãƒˆã‚’æ›¸ãã€ãã‚Œã‚‰ã‚’å®Ÿè¡Œã™ã‚‹æ–¹æ³•ã‚’å­¦ã³ã¾ã™ã€‚ã“ã‚Œã‚‰ã¯ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã§ã¯ãªãã€åˆ†æ•£ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã©ã®ã‚ˆã†ã«é€£æºã—ã¦å‹•ä½œã™ã‚‹ã‹ã‚’æ¤œè¨¼ã™ã‚‹ãŸã‚ã® æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆãŠã‚ˆã³çµ±åˆãƒ†ã‚¹ãƒˆ ã§ã™ã€‚Aspire ã§ã¯ã€xUnit.netã€MSTestã€NUnit å‘ã‘ã®ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒæä¾›ã•ã‚Œã¦ãŠã‚Šã€ãã‚Œãã‚Œã«ã‚µãƒ³ãƒ—ãƒ«ãƒ†ã‚¹ãƒˆãŒå«ã¾ã‚Œã¦ã„ã‚‹ãŸã‚ã€ã™ãã«å§‹ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

## åˆ†æ•£ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆã®è€ƒãˆæ–¹

Aspire ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ†ã‚¹ãƒˆã‚’å§‹ã‚ã‚‹å‰ã«ã€[ğŸ“¦ Aspire.Hosting.Testing](https://www.nuget.org/packages/Aspire.Hosting.Testing) NuGet ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒå¿…è¦ã§ã™ã€‚ã“ã®å¼·åŠ›ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ã€åˆ†æ•£ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã®ãƒ†ã‚¹ãƒˆãƒ›ã‚¹ãƒˆã‚’ä½œæˆã™ã‚‹ãŸã‚ã®å…¥ã‚Šå£ã¨ãªã‚‹ `DistributedApplicationTestingBuilder` ã‚¯ãƒ©ã‚¹ã‚’æä¾›ã—ã¾ã™ã€‚

`DistributedApplicationTestingBuilder` ã¯ã€çµ„ã¿è¾¼ã¿ã®è¨ˆæ¸¬æ©Ÿèƒ½ã‚’å‚™ãˆãŸçŠ¶æ…‹ã§ AppHost ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’èµ·å‹•ã™ã‚‹ãƒ†ã‚¹ãƒˆãƒãƒ¼ãƒã‚¹ã¨è€ƒãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«å…¨ä½“ã‚’é€šã—ã¦ãƒ›ã‚¹ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã€æ“ä½œã™ã‚‹ãŸã‚ã®ç´°ã‹ãªåˆ¶å¾¡ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚`IDistributedApplicationBuilder` ã‚„ `DistributedApplication` ã¨ã„ã£ãŸé¦´æŸ“ã¿ã®ã‚ã‚‹ Aspire ã®å‹ã‚’ä½¿ã£ã¦ [AppHost](/ja/get-started/app-host/) ã‚’æ§‹ç¯‰ãƒ»èµ·å‹•ã§ãã‚‹ãŸã‚ã€è‡ªç„¶ã§ç›´æ„Ÿçš„ãªå½¢ã§ãƒ†ã‚¹ãƒˆã‚’è¨˜è¿°ã§ãã¾ã™ã€‚

## ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ

Aspire ã®ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹ã«ã¯ã€ãƒ†ã‚¹ãƒˆç”¨ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ç”¨ã—ã¾ã™ã€‚æ–°ã—ã„ Aspire ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é–‹å§‹ã™ã‚‹éš›ã€ä¸€éƒ¨ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã§ã¯ IDE ã‚„ CLI ã®ãƒ„ãƒ¼ãƒ«ã‹ã‚‰ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹ã‹ã©ã†ã‹ã‚’å°‹ã­ã‚‰ã‚Œã¾ã™ã€‚æ—¢å­˜ã® Aspire ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã«ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿½åŠ ã™ã‚‹å ´åˆã¯ã€[`dotnet new`](https://learn.microsoft.com/dotnet/core/tools/dotnet-new) ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™:

<Pivot id="xunit">

```bash
dotnet new aspire-xunit -o xUnit.Tests
```

</Pivot>
<Pivot id="mstest">

```bash
dotnet new aspire-mstest -o MSTest.Tests
```

</Pivot>
<Pivot id="nunit">

```bash
dotnet new aspire-nunit -o NUnit.Tests
```

</Pivot>

æ–°ã—ãä½œæˆã•ã‚ŒãŸãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã¾ã™:

<Pivot id="xunit">

```bash
cd xUnit.Tests
```

</Pivot>
<Pivot id="mstest">

```bash
cd MSTest.Tests
```

</Pivot>
<Pivot id="nunit">

```bash
cd NUnit.Tests
```

</Pivot>

ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ Aspire ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã«è¿½åŠ ã—ãŸå¾Œã€å¯¾è±¡ã¨ãªã‚‹ AppHost ã¸ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‚ç…§ã‚’è¿½åŠ ã—ã¾ã™ã€‚ãŸã¨ãˆã°ã€Aspire ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã« `AspireApp.AppHost` ã¨ã„ã†åå‰ã® AppHost ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒå«ã¾ã‚Œã¦ã„ã‚‹å ´åˆã€æ¬¡ã®ã‚ˆã†ã«ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰å‚ç…§ã‚’è¿½åŠ ã—ã¾ã™:

<Pivot id="xunit">

```bash
dotnet reference add ../AspireApp.AppHost/AspireApp.AppHost.csproj --project xUnit.Tests.csproj
```

</Pivot>
<Pivot id="mstest">

```bash
dotnet reference add ../AspireApp.AppHost/AspireApp.AppHost.csproj --project MSTest.Tests.csproj
```

</Pivot>
<Pivot id="nunit">

```bash
dotnet reference add ../AspireApp.AppHost/AspireApp.AppHost.csproj --project NUnit.Tests.csproj
```

</Pivot>

æœ€å¾Œã«ã€ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã® `IntegrationTest1.cs` ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã‚’è§£é™¤ã™ã‚‹ã¨ã€ã‚µãƒ³ãƒ—ãƒ«ãƒ†ã‚¹ãƒˆã‚’ç¢ºèªã§ãã¾ã™ã€‚

## ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ç¢ºèªã™ã‚‹

æ¬¡ã®ã‚µãƒ³ãƒ—ãƒ« ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€**Blazor & Minimal API starter** ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä¸€éƒ¨ã¨ã—ã¦ä½œæˆã•ã‚ŒãŸã‚‚ã®ã§ã™ã€‚ã‚‚ã—ã“ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«é¦´æŸ“ã¿ãŒãªã„å ´åˆã¯ã€[æœ€åˆã®ã‚¢ãƒ—ãƒªã‚’ä½œæˆã™ã‚‹ â€” C#](/ja/get-started/first-app/?lang=csharp)ã‚’ã”å‚ç…§ãã ã•ã„ã€‚Aspire ã®ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ã€å¯¾è±¡ã¨ãªã‚‹ AppHost ã«å¯¾ã—ã¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‚ç…§ã®ä¾å­˜é–¢ä¿‚ã‚’æŒã¡ã¾ã™ã€‚ä»¥ä¸‹ã¯ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä¾‹ã§ã™:

<Pivot id="xunit">

```xml title="xUnit.Tests.csproj"
<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
    <IsPackable>false</IsPackable>
    <IsTestProject>true</IsTestProject>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="Aspire.Hosting.Testing" Version="13.0.0" />
    <PackageReference Include="coverlet.collector" Version="6.0.4" />
    <PackageReference Include="Microsoft.NET.Test.Sdk" Version="17.14.1" />
    <PackageReference Include="xunit" Version="2.9.3" />
    <PackageReference Include="xunit.runner.visualstudio" Version="3.1.4" />
  </ItemGroup>

  <ItemGroup>
    <ProjectReference Include="..\AspireApp.AppHost\AspireApp.AppHost.csproj" />
  </ItemGroup>

  <ItemGroup>
    <Using Include="System.Net" />
    <Using Include="Microsoft.Extensions.DependencyInjection" />
    <Using Include="Aspire.Hosting.ApplicationModel" />
    <Using Include="Aspire.Hosting.Testing" />
    <Using Include="Xunit" />
  </ItemGroup>

</Project>
```

</Pivot>
<Pivot id="mstest">

```xml title="MSTest.Tests.csproj"
<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
    <IsPackable>false</IsPackable>
    <IsTestProject>true</IsTestProject>
    <EnableMSTestRunner>true</EnableMSTestRunner>
    <OutputType>Exe</OutputType>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="Aspire.Hosting.Testing" Version="13.0.0" />
    <PackageReference Include="MSTest" Version="3.10.2" />
  </ItemGroup>

  <ItemGroup>
    <ProjectReference Include="..\AspireApp.AppHost\AspireApp.AppHost.csproj" />
  </ItemGroup>

  <ItemGroup>
    <Using Include="System.Net" />
    <Using Include="Microsoft.Extensions.DependencyInjection" />
    <Using Include="Aspire.Hosting.ApplicationModel" />
    <Using Include="Aspire.Hosting.Testing" />
    <Using Include="Microsoft.VisualStudio.TestTools.UnitTesting" />
  </ItemGroup>

</Project>
```

</Pivot>
<Pivot id="nunit">

```xml title="NUnit.Tests.csproj"
<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
    <IsPackable>false</IsPackable>
    <IsTestProject>true</IsTestProject>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="Aspire.Hosting.Testing" Version="13.0.0" />
    <PackageReference Include="coverlet.collector" Version="6.0.4" />
    <PackageReference Include="Microsoft.NET.Test.Sdk" Version="17.14.1" />
    <PackageReference Include="NUnit" Version="4.4.0" />
    <PackageReference Include="NUnit.Analyzers" Version="4.10.0" />
    <PackageReference Include="NUnit3TestAdapter" Version="4.6.0" />
  </ItemGroup>

  <ItemGroup>
    <ProjectReference Include="..\AspireApp.AppHost\AspireApp.AppHost.csproj" />
  </ItemGroup>

  <ItemGroup>
    <Using Include="System.Net" />
    <Using Include="Microsoft.Extensions.DependencyInjection" />
    <Using Include="Aspire.Hosting.ApplicationModel" />
    <Using Include="Aspire.Hosting.Testing" />
    <Using Include="NUnit.Framework" />
  </ItemGroup>

</Project>
```

</Pivot>

ä¸Šè¨˜ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€æ¯”è¼ƒçš„ä¸€èˆ¬çš„ãªæ§‹æˆã«ãªã£ã¦ã„ã¾ã™ã€‚[ğŸ“¦ Aspire.Hosting.Testing](https://www.nuget.org/packages/Aspire.Hosting.Testing) NuGet ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¸ã® `PackageReference` ãŒå«ã¾ã‚Œã¦ãŠã‚Šã€ã“ã‚Œã«ã¯ Aspire ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‘ã‘ã®ãƒ†ã‚¹ãƒˆã‚’è¨˜è¿°ã™ã‚‹ãŸã‚ã«å¿…è¦ãªå‹ãŒã™ã¹ã¦å«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã¯ã€1 ã¤ã®ãƒ†ã‚¹ãƒˆã‚’å«ã‚€ `IntegrationTest1` ã‚¯ãƒ©ã‚¹ãŒç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã®ãƒ†ã‚¹ãƒˆã§ã¯ã€æ¬¡ã®ã‚·ãƒŠãƒªã‚ªã‚’æ¤œè¨¼ã—ã¾ã™:

- AppHost ãŒæ­£å¸¸ã«ä½œæˆã•ã‚Œã€èµ·å‹•ã§ãã‚‹ã“ã¨
- `webfrontend` ãƒªã‚½ãƒ¼ã‚¹ãŒåˆ©ç”¨å¯èƒ½ã§ã€å®Ÿè¡Œä¸­ã§ã‚ã‚‹ã“ã¨
- `webfrontend` ãƒªã‚½ãƒ¼ã‚¹ã«å¯¾ã—ã¦ HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã§ãã€æˆåŠŸãƒ¬ã‚¹ãƒãƒ³ã‚¹ï¼ˆHTTP 200 OKï¼‰ãŒè¿”ã‚‹ã“ã¨

Consider the following test class:

<Pivot id="xunit">

```csharp title="IntegrationTest1.cs"
using Microsoft.Extensions.Logging;

namespace xUnit.Tests.Tests;

public class IntegrationTest1
{
    private static readonly TimeSpan DefaultTimeout = TimeSpan.FromSeconds(30);

    [Fact]
    public async Task GetWebResourceRootReturnsOkStatusCode()
    {
        // æº–å‚™ï¼ˆArrangeï¼‰
        var cancellationToken = CancellationToken.None;
        var appHost = await DistributedApplicationTestingBuilder
            .CreateAsync<Projects.AspireApp_AppHost>(cancellationToken);
        appHost.Services.AddLogging(logging =>
        {
            logging.SetMinimumLevel(LogLevel.Debug);
            // ã‚¢ãƒ—ãƒªã®æ§‹æˆã‹ã‚‰ã®ãƒ­ã‚° ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’ä¸Šæ›¸ã
            logging.AddFilter(appHost.Environment.ApplicationName, LogLevel.Debug);
            logging.AddFilter("Aspire.", LogLevel.Debug);
        });
        appHost.Services.ConfigureHttpClientDefaults(clientBuilder =>
        {
            clientBuilder.AddStandardResilienceHandler();
        });

        await using var app = await appHost.BuildAsync(cancellationToken)
            .WaitAsync(DefaultTimeout, cancellationToken);
        await app.StartAsync(cancellationToken)
            .WaitAsync(DefaultTimeout, cancellationToken);

        // å®Ÿè¡Œï¼ˆActï¼‰
        using var httpClient = app.CreateHttpClient("webfrontend");
        await app.ResourceNotifications.WaitForResourceHealthyAsync(
            "webfrontend", cancellationToken)
            .WaitAsync(DefaultTimeout, cancellationToken);
        using var response = await httpClient.GetAsync("/", cancellationToken);

        // æ¤œè¨¼ï¼ˆAssertï¼‰
        Assert.Equal(HttpStatusCode.OK, response.StatusCode);
    }
}
```

</Pivot>
<Pivot id="mstest">

```csharp title="IntegrationTest1.cs"
using Microsoft.Extensions.Logging;

namespace MSTest.Tests;

[TestClass]
public class IntegrationTest1
{
    public TestContext TestContext { get; set; }

    private static readonly TimeSpan DefaultTimeout = TimeSpan.FromSeconds(30);

    [TestMethod]
    public async Task GetWebResourceRootReturnsOkStatusCode()
    {
        // æº–å‚™ï¼ˆArrangeï¼‰
        var cancellationToken = TestContext.CancellationTokenSource.Token;
        var appHost = await DistributedApplicationTestingBuilder
            .CreateAsync<Projects.AspireApp_AppHost>();
        appHost.Services.AddLogging(logging =>
        {
            logging.SetMinimumLevel(LogLevel.Debug);
            // ã‚¢ãƒ—ãƒªã®æ§‹æˆã‹ã‚‰ã®ãƒ­ã‚° ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’ä¸Šæ›¸ã
            logging.AddFilter(appHost.Environment.ApplicationName, LogLevel.Debug);
            logging.AddFilter("Aspire.", LogLevel.Debug);
        });
        appHost.Services.ConfigureHttpClientDefaults(clientBuilder =>
        {
            clientBuilder.AddStandardResilienceHandler();
        });

        await using var app = await appHost.BuildAsync(cancellationToken)
            .WaitAsync(DefaultTimeout, cancellationToken);
        await app.StartAsync(cancellationToken)
            .WaitAsync(DefaultTimeout, cancellationToken);

        // å®Ÿè¡Œï¼ˆActï¼‰
        using var httpClient = app.CreateHttpClient("webfrontend");
        await app.ResourceNotifications.WaitForResourceHealthyAsync(
            "webfrontend", cancellationToken)
            .WaitAsync(DefaultTimeout, cancellationToken);
        using var response = await httpClient.GetAsync("/", cancellationToken);

        // æ¤œè¨¼ï¼ˆAssertï¼‰
        Assert.AreEqual(HttpStatusCode.OK, response.StatusCode);
    }
}
```

</Pivot>
<Pivot id="nunit">

```csharp title="IntegrationTest1.cs"
using Microsoft.Extensions.Logging;

namespace NUnit.Tests;

public class IntegrationTest1
{
    private static readonly TimeSpan DefaultTimeout = TimeSpan.FromSeconds(30);

    [Test]
    public async Task GetWebResourceRootReturnsOkStatusCode()
    {
        // æº–å‚™ï¼ˆArrangeï¼‰
        using var cts = new CancellationTokenSource(DefaultTimeout);
        var cancellationToken = cts.Token;
        var appHost = await DistributedApplicationTestingBuilder
            .CreateAsync<Projects.AspireApp_AppHost>();
        appHost.Services.AddLogging(logging =>
        {
            logging.SetMinimumLevel(LogLevel.Debug);
            // ã‚¢ãƒ—ãƒªã®æ§‹æˆã‹ã‚‰ã®ãƒ­ã‚° ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’ä¸Šæ›¸ã
            logging.AddFilter(appHost.Environment.ApplicationName, LogLevel.Debug);
            logging.AddFilter("Aspire.", LogLevel.Debug);
        });
        appHost.Services.ConfigureHttpClientDefaults(clientBuilder =>
        {
            clientBuilder.AddStandardResilienceHandler();
        });

        await using var app = await appHost.BuildAsync(cancellationToken)
            .WaitAsync(DefaultTimeout, cancellationToken);
        await app.StartAsync(cancellationToken)
            .WaitAsync(DefaultTimeout, cancellationToken);

        // å®Ÿè¡Œï¼ˆActï¼‰
        using var httpClient = app.CreateHttpClient("webfrontend");
        await app.ResourceNotifications.WaitForResourceHealthyAsync(
            "webfrontend", cancellationToken)
            .WaitAsync(DefaultTimeout, cancellationToken);
        using var response = await httpClient.GetAsync("/", cancellationToken);

        // æ¤œè¨¼ï¼ˆAssertï¼‰
        Assert.That(response.StatusCode, Is.EqualTo(HttpStatusCode.OK));
    }
}
```

</Pivot>

ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€æ¬¡ã®ã“ã¨ã‚’è¡Œã£ã¦ã„ã¾ã™:

- `DistributedApplicationTestingBuilder.CreateAsync` API ã‚’ä½¿ç”¨ã—ã¦ã€AppHost ã‚’éåŒæœŸã«ä½œæˆã—ã¦ã„ã¾ã™ã€‚
- `appHost` ã¯ `IDistributedApplicationTestingBuilder` ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ã€AppHost ã‚’è¡¨ã—ã¾ã™ã€‚
- appHost ã®ã‚µãƒ¼ãƒ“ã‚¹ ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã«å¯¾ã—ã¦ã€ãƒ­ã‚°è¨­å®šãŠã‚ˆã³æ¨™æº–ã® HTTP ãƒ¬ã‚¸ãƒªã‚¨ãƒ³ã‚¹ ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’æ§‹æˆã—ã¦ã„ã¾ã™ã€‚è©³ç´°ã«ã¤ã„ã¦ã¯ [å›å¾©æ€§ãŒã‚ã‚‹ HTTP ã‚¢ãƒ—ãƒªã‚’æ§‹ç¯‰ã™ã‚‹: ä¸»è¦ãªé–‹ç™ºãƒ‘ã‚¿ãƒ¼ãƒ³](https://learn.microsoft.com/ja-jp/dotnet/core/resilience/http-resilience)ã‚’ã”å‚ç…§ãã ã•ã„ã€‚
- The `appHost` has its `BuildAsync` method invoked, which returns the `DistributedApplication` instance as the `app`.
- `appHost.BuildAsync` ã‚’å‘¼ã³å‡ºã—ã€`DistributedApplication` ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ `app` ã¨ã—ã¦å–å¾—ã—ã¦ã„ã¾ã™ã€‚
- `app` ã‚’éåŒæœŸã«èµ·å‹•ã—ã¦ã„ã¾ã™ã€‚
- `app.CreateHttpClient` ã‚’å‘¼ã³å‡ºã—ã¦ã€`webfrontend` ãƒªã‚½ãƒ¼ã‚¹ç”¨ã® `HttpClient` ã‚’ä½œæˆã—ã¦ã„ã¾ã™ã€‚
- `app.ResourceNotifications` ã‚’ä½¿ç”¨ã—ã¦ã€`webfrontend` ãƒªã‚½ãƒ¼ã‚¹ãŒæ­£å¸¸çŠ¶æ…‹ã«ãªã‚‹ã¾ã§å¾…æ©Ÿã—ã¦ã„ã¾ã™ã€‚
- A simple HTTP GET request is made to the root of the `webfrontend` resource.
- `webfrontend` ãƒªã‚½ãƒ¼ã‚¹ã®ãƒ«ãƒ¼ãƒˆã«å¯¾ã—ã¦ã€ã‚·ãƒ³ãƒ—ãƒ«ãª HTTP GET ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ã¦ã„ã¾ã™ã€‚
- The test asserts that the response status code is `OK`.
- ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ ã‚³ãƒ¼ãƒ‰ãŒ OKï¼ˆHTTP 200ï¼‰ã§ã‚ã‚‹ã“ã¨ã‚’æ¤œè¨¼ã—ã¦ã„ã¾ã™ã€‚

## ãƒªã‚½ãƒ¼ã‚¹ã®ç’°å¢ƒå¤‰æ•°ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹

Aspire ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³å†…ã®ãƒªã‚½ãƒ¼ã‚¹ã¨ã€ãã®ãƒªã‚½ãƒ¼ã‚¹ãŒè¡¨ç¾ã—ã¦ã„ã‚‹ä¾å­˜é–¢ä¿‚ã‚’ã•ã‚‰ã«ãƒ†ã‚¹ãƒˆã™ã‚‹ãŸã‚ã«ã€ç’°å¢ƒå¤‰æ•°ãŒæ­£ã—ãæ³¨å…¥ã•ã‚Œã¦ã„ã‚‹ã‹ã‚’æ¤œè¨¼ã§ãã¾ã™ã€‚æ¬¡ã®ä¾‹ã§ã¯ã€`webfrontend` ãƒªã‚½ãƒ¼ã‚¹ã« `apiservice` ãƒªã‚½ãƒ¼ã‚¹ã¸è§£æ±ºã•ã‚Œã‚‹ HTTPS ã®ç’°å¢ƒå¤‰æ•°ãŒå­˜åœ¨ã™ã‚‹ã“ã¨ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹æ–¹æ³•ã‚’ç¤ºã—ã¾ã™:

<Pivot id="xunit">

```csharp title="EnvVarTests.cs"
using Aspire.Hosting;

namespace Tests;

public class EnvVarTests
{
    [Fact]
    public async Task WebResourceEnvVarsResolveToApiService()
    {
        // æº–å‚™ï¼ˆArrangeï¼‰
        var builder = await DistributedApplicationTestingBuilder
            .CreateAsync<Projects.AspireApp_AppHost>();

        var frontend = builder.CreateResourceBuilder<ProjectResource>("webfrontend");

        // å®Ÿè¡Œï¼ˆActï¼‰
        var envVars = await frontend.Resource.GetEnvironmentVariableValuesAsync(
            DistributedApplicationOperation.Publish);

        // æ¤œè¨¼ï¼ˆAssertï¼‰
        Assert.Contains(envVars, static (kvp) =>
        {
            var (key, value) = kvp;

            return key is "APISERVICE_HTTPS"
                && value is "{apiservice.bindings.https.url}";
        });
    }
}
```

</Pivot>
<Pivot id="mstest">

```csharp title="EnvVarTests.cs"
using Aspire.Hosting;

namespace Tests;

[TestClass]
public class EnvVarTests
{
    [TestMethod]
    public async Task WebResourceEnvVarsResolveToApiService()
    {
        // æº–å‚™ï¼ˆArrangeï¼‰
        var builder = await DistributedApplicationTestingBuilder
            .CreateAsync<Projects.AspireApp_AppHost>();

        var frontend = builder.CreateResourceBuilder<ProjectResource>("webfrontend");

        // å®Ÿè¡Œï¼ˆActï¼‰
        var envVars = await frontend.Resource.GetEnvironmentVariableValuesAsync(
            DistributedApplicationOperation.Publish);

        // æ¤œè¨¼ï¼ˆAssertï¼‰
        CollectionAssert.Contains(envVars,
            new KeyValuePair<string, string>(
                key: "APISERVICE_HTTPS",
                value: "{apiservice.bindings.https.url}"));
    }
}
```

</Pivot>
<Pivot id="nunit">

```csharp title="EnvVarTests.cs"
using Aspire.Hosting;

namespace Tests;

public class EnvVarTests
{
    [Test]
    public async Task WebResourceEnvVarsResolveToApiService()
    {
        // æº–å‚™ï¼ˆArrangeï¼‰
        var builder = await DistributedApplicationTestingBuilder
            .CreateAsync<Projects.AspireApp_AppHost>();

        var frontend = builder.CreateResourceBuilder<ProjectResource>("webfrontend");

        // å®Ÿè¡Œï¼ˆActï¼‰
        var envVars = await frontend.Resource.GetEnvironmentVariableValuesAsync(
            DistributedApplicationOperation.Publish);

        // æ¤œè¨¼ï¼ˆAssertï¼‰
        Assert.That(envVars, Does.Contain(
            new KeyValuePair<string, string>(
                key: "APISERVICE_HTTPS",
                value: "{apiservice.bindings.https.url}")));
    }
}
```

</Pivot>

ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã§ã¯ã€æ¬¡ã®ã“ã¨ã‚’è¡Œã£ã¦ã„ã¾ã™:

- `DistributedApplicationTestingBuilder.CreateAsync` API ã‚’åˆ©ç”¨ã—ã¦ã€AppHost ã‚’éåŒæœŸã«ä½œæˆã—ã¦ã„ã¾ã™ã€‚
- `builder` ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¯ã€`Resources` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‹ã‚‰ ã€Œwebfrontendã€ ã¨ã„ã†åå‰ã® `IResourceWithEnvironment` ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å–å¾—ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚
- `webfrontend` ãƒªã‚½ãƒ¼ã‚¹ã«å¯¾ã—ã¦ `GetEnvironmentVariableValuesAsync` ã‚’å‘¼ã³å‡ºã—ã€æ§‹æˆæ¸ˆã¿ã®ç’°å¢ƒå¤‰æ•°ã‚’å–å¾—ã—ã¦ã„ã¾ã™ã€‚
- `GetEnvironmentVariableValuesAsync` å‘¼ã³å‡ºã—æ™‚ã« `DistributedApplicationOperation.Publish` ã‚’æ¸¡ã—ã€ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°å¼ã¨ã—ã¦ãƒªã‚½ãƒ¼ã‚¹ã«å…¬é–‹ï¼ˆPublishï¼‰ã•ã‚Œã‚‹ç’°å¢ƒå¤‰æ•°ã‚’å¯¾è±¡ã«ã—ã¦ã„ã¾ã™ã€‚
- è¿”å´ã•ã‚ŒãŸç’°å¢ƒå¤‰æ•°ã‚’ç”¨ã„ã¦ã€ãƒ†ã‚¹ãƒˆã§ã¯ `webfrontend` ãƒªã‚½ãƒ¼ã‚¹ã«ã€`apiservice` ãƒªã‚½ãƒ¼ã‚¹ã¸è§£æ±ºã•ã‚Œã‚‹ HTTPS ã®ç’°å¢ƒå¤‰æ•°ãŒå­˜åœ¨ã™ã‚‹ã“ã¨ã‚’æ¤œè¨¼ã—ã¦ã„ã¾ã™ã€‚

## ãƒ†ã‚¹ãƒˆã‹ã‚‰ãƒ­ã‚°ã‚’å–å¾—ã™ã‚‹

Aspire ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ†ã‚¹ãƒˆã‚’è¨˜è¿°ã™ã‚‹éš›ã€ãƒ‡ãƒãƒƒã‚°ã‚„ãƒ†ã‚¹ãƒˆå®Ÿè¡ŒçŠ¶æ³ã®ç¢ºèªã®ãŸã‚ã«ãƒ­ã‚°ã‚’å–å¾—ãƒ»è¡¨ç¤ºã—ãŸã„å ´é¢ãŒã‚ã‚‹ã‹ã¨æ€ã„ã¾ã™ã€‚`DistributedApplicationTestingBuilder` ã§ã¯ã‚µãƒ¼ãƒ“ã‚¹ ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ãŸã‚ã€ãƒ†ã‚¹ãƒˆ ã‚·ãƒŠãƒªã‚ªå‘ã‘ã«ãƒ­ã‚°è¨­å®šã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚

### ãƒ­ã‚° ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’æ§‹æˆã™ã‚‹

ãƒ†ã‚¹ãƒˆã‹ã‚‰ãƒ­ã‚°ã‚’å–å¾—ã™ã‚‹ã«ã¯ã€`builder.Services` ã«å¯¾ã—ã¦ `AddLogging` ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã—ã€ãƒ†ã‚¹ãƒˆ ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯å‘ã‘ã®ãƒ­ã‚° ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’æ§‹æˆã—ã¾ã™:

<Pivot id="xunit">

```csharp title="LoggingTest.cs"
using Microsoft.Extensions.Logging;

namespace Tests;

public class LoggingTest
{
    [Fact]
    public async Task GetWebResourceRootReturnsOkStatusCodeWithLogging()
    {
        // æº–å‚™ï¼ˆArrangeï¼‰
        var builder = await DistributedApplicationTestingBuilder
            .CreateAsync<Projects.AspireApp_AppHost>();

        builder.Services.ConfigureHttpClientDefaults(clientBuilder =>
        {
            clientBuilder.AddStandardResilienceHandler();
        });

        // ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚ã®ãƒ­ã‚°ã‚’å–å¾—ã™ã‚‹ãŸã‚ã®ãƒ­ã‚°è¨­å®š
        builder.Services.AddLogging(logging => logging
            .AddConsole() // ãƒ­ã‚°ã‚’ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«å‡ºåŠ›
            .AddFilter("Default", LogLevel.Information)
            .AddFilter("Microsoft.AspNetCore", LogLevel.Warning)
            .AddFilter("Aspire.Hosting.Dcp", LogLevel.Warning));

        await using var app = await builder.BuildAsync();

        await app.StartAsync();

        // å®Ÿè¡Œï¼ˆActï¼‰
        var httpClient = app.CreateHttpClient("webfrontend");

        using var cts = new CancellationTokenSource(TimeSpan.FromSeconds(30));
        await app.ResourceNotifications.WaitForResourceHealthyAsync(
            "webfrontend",
            cts.Token);

        var response = await httpClient.GetAsync("/");

        // æ¤œè¨¼ï¼ˆAssertï¼‰
        Assert.Equal(HttpStatusCode.OK, response.StatusCode);
    }
}
```

</Pivot>
<Pivot id="mstest">

```csharp title="LoggingTest.cs"
using Microsoft.Extensions.Logging;

namespace Tests;

[TestClass]
public class LoggingTest
{
    [TestMethod]
    public async Task GetWebResourceRootReturnsOkStatusCodeWithLogging()
    {
        // æº–å‚™ï¼ˆArrangeï¼‰
        var builder = await DistributedApplicationTestingBuilder
            .CreateAsync<Projects.AspireApp_AppHost>();

        builder.Services.ConfigureHttpClientDefaults(clientBuilder =>
        {
            clientBuilder.AddStandardResilienceHandler();
        });

        // ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚ã®ãƒ­ã‚°ã‚’å–å¾—ã™ã‚‹ãŸã‚ã®ãƒ­ã‚°è¨­å®š
        builder.Services.AddLogging(logging => logging
            .AddConsole() // ãƒ­ã‚°ã‚’ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«å‡ºåŠ›
            .AddFilter("Default", LogLevel.Information)
            .AddFilter("Microsoft.AspNetCore", LogLevel.Warning)
            .AddFilter("Aspire.Hosting.Dcp", LogLevel.Warning));

        await using var app = await builder.BuildAsync();

        await app.StartAsync();

        // å®Ÿè¡Œï¼ˆActï¼‰
        var httpClient = app.CreateHttpClient("webfrontend");

        using var cts = new CancellationTokenSource(TimeSpan.FromSeconds(30));
        await app.ResourceNotifications.WaitForResourceHealthyAsync(
            "webfrontend",
            cts.Token);

        var response = await httpClient.GetAsync("/");

        // æ¤œè¨¼ï¼ˆAssertï¼‰
        Assert.AreEqual(HttpStatusCode.OK, response.StatusCode);
    }
}
```

</Pivot>
<Pivot id="nunit">

```csharp title="LoggingTest.cs"
using Microsoft.Extensions.Logging;

namespace Tests;

public class LoggingTest
{
    [Test]
    public async Task GetWebResourceRootReturnsOkStatusCodeWithLogging()
    {
        // æº–å‚™ï¼ˆArrangeï¼‰
        var builder = await DistributedApplicationTestingBuilder
            .CreateAsync<Projects.AspireApp_AppHost>();

        builder.Services.ConfigureHttpClientDefaults(clientBuilder =>
        {
            clientBuilder.AddStandardResilienceHandler();
        });

        // ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚ã®ãƒ­ã‚°ã‚’å–å¾—ã™ã‚‹ãŸã‚ã®ãƒ­ã‚°è¨­å®š
        builder.Services.AddLogging(logging => logging
            .AddConsole() // ãƒ­ã‚°ã‚’ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«å‡ºåŠ›
            .AddFilter("Default", LogLevel.Information)
            .AddFilter("Microsoft.AspNetCore", LogLevel.Warning)
            .AddFilter("Aspire.Hosting.Dcp", LogLevel.Warning));

        await using var app = await builder.BuildAsync();

        await app.StartAsync();

        // å®Ÿè¡Œï¼ˆActï¼‰
        var httpClient = app.CreateHttpClient("webfrontend");

        using var cts = new CancellationTokenSource(TimeSpan.FromSeconds(30));
        await app.ResourceNotifications.WaitForResourceHealthyAsync(
                "webfrontend",
                cts.Token);

        var response = await httpClient.GetAsync("/");

        // æ¤œè¨¼ï¼ˆAssertï¼‰
        Assert.That(response.StatusCode, Is.EqualTo(HttpStatusCode.OK));
    }
}
```

</Pivot>

### ãƒ­ã‚° ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’æ§‹æˆã™ã‚‹

ãƒ†ã‚¹ãƒˆ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å´ã® _appsettings.json_ ã®æ§‹æˆãŒè‡ªå‹•çš„ã«åæ˜ ã•ã‚Œã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãã®ãŸã‚ã€ãƒ­ã‚° ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’æ˜ç¤ºçš„ã«æ§‹æˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã“ã‚Œã¯ã€ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£é–¢é€£ã®å¤§é‡ã®ãƒ­ã‚°ã«ã‚ˆã£ã¦ãƒ†ã‚¹ãƒˆå‡ºåŠ›ãŒåŸ‹ã‚‚ã‚Œã¦ã—ã¾ã†ã®ã‚’é˜²ããŸã‚ã«ã€ã¨ã¦ã‚‚é‡è¦ã§ã™ã€‚æ¬¡ã®ã‚¹ãƒ‹ãƒšãƒƒãƒˆã§ã¯ã€ãƒ­ã‚° ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚’æ˜ç¤ºçš„ã«è¨­å®šã—ã¦ã„ã¾ã™:

```csharp
builder.Services.AddLogging(logging => logging
    .AddFilter("Default", LogLevel.Information)
    .AddFilter("Microsoft.AspNetCore", LogLevel.Warning)
    .AddFilter("Aspire.Hosting.Dcp", LogLevel.Warning));
```

ã“ã®æ§‹æˆã§ã¯ã€æ¬¡ã®ã‚ˆã†ãªè¨­å®šã‚’è¡Œã£ã¦ã„ã¾ã™:

- ã»ã¨ã‚“ã©ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ ãƒ­ã‚°ã«ã¤ã„ã¦ã€æ—¢å®šã®ãƒ­ã‚° ãƒ¬ãƒ™ãƒ«ã‚’ `Information` ã«è¨­å®šã—ã¦ã„ã¾ã™ã€‚
- ASP.NET Core ã®ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ç”±æ¥ã®ãƒã‚¤ã‚ºã‚’æŠ‘ãˆã‚‹ãŸã‚ã€ãƒ­ã‚° ãƒ¬ãƒ™ãƒ«ã‚’ `Warning` ã«ã‚»ãƒƒãƒˆã—ã¦ã„ã¾ã™ã€‚
- Aspire ã®ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°åŸºç›¤ã«é–¢ã™ã‚‹ãƒ­ã‚°ã‚‚ `Warning` ãƒ¬ãƒ™ãƒ«ã«åˆ¶é™ã—ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å›ºæœ‰ã®ãƒ­ã‚°ã«é›†ä¸­ã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚

### ã‚ˆãä½¿ã‚ã‚Œã‚‹ãƒ­ã‚°é–¢é€£ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

ãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­ã®ãƒ­ã‚°ç®¡ç†ã‚’æ”¯æ´ã™ã‚‹ãŸã‚ã«ã€ãƒ†ã‚¹ãƒˆ ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã”ã¨ã«åˆ©ç”¨ã§ãã‚‹ãƒ­ã‚° ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒç•°ãªã‚Šã¾ã™:

<Pivot id="xunit">

xUnit.net ã§ã¯ã€ãƒ†ã‚¹ãƒˆã®ãƒ­ã‚°å‡ºåŠ›ã¯è‡ªå‹•çš„ã«ãƒ†ã‚¹ãƒˆçµæœã¨ã—ã¦ã‚­ãƒ£ãƒ—ãƒãƒ£ã•ã‚Œã¾ã›ã‚“ã€‚ãã®ãŸã‚ã€ãƒ­ã‚°ã‚’ãƒ†ã‚¹ãƒˆå‡ºåŠ›ã¨ã—ã¦æ‰±ã†ã«ã¯ã€[`ITestOutputHelper` ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹](https://xunit.net/docs/capturing-output)ã‚’ä½¿ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

xUnit.net ã§ã¯ã€æ¬¡ã®ã‚ˆã†ãªãƒ­ã‚° ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®åˆ©ç”¨ãŒè€ƒãˆã‚‰ã‚Œã¾ã™:

- [ğŸ“¦ MartinCostello.Logging.XUnit](https://www.nuget.org/packages/MartinCostello.Logging.XUnit) - `ILogger` ã®ãƒ­ã‚°ã‚’ `ITestOutputHelper` ã®å‡ºåŠ›ã¨ã—ã¦è¡¨ç¤ºã§ãã¾ã™ã€‚
- [ğŸ“¦ Xunit.DependencyInjection.Logging](https://www.nuget.org/packages/Xunit.DependencyInjection.Logging) - xUnit.net ã®ä¾å­˜æ€§æ³¨å…¥ã¨çµ±åˆã§ãã¾ã™ã€‚
- [ğŸ“¦ Serilog.Extensions.Logging.File](https://www.nuget.org/packages/Serilog.Extensions.Logging.File) - ãƒ­ã‚°ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«å‡ºåŠ›ã—ã¾ã™ã€‚
- [ğŸ“¦ Microsoft.Extensions.Logging.Console](https://www.nuget.org/packages/Microsoft.Extensions.Logging.Console) - ãƒ­ã‚°ã‚’ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«å‡ºåŠ›ã—ã¾ã™ã€‚

</Pivot>
<Pivot id="mstest">

MSTest ã§ã¯ã€æ¬¡ã®ã‚ˆã†ãªãƒ­ã‚° ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®åˆ©ç”¨ãŒè€ƒãˆã‚‰ã‚Œã¾ã™:

- [ğŸ“¦ Serilog.Extensions.Logging.File](https://www.nuget.org/packages/Serilog.Extensions.Logging.File) - ãƒ­ã‚°ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«å‡ºåŠ›ã—ã¾ã™ã€‚
- [ğŸ“¦ Microsoft.Extensions.Logging.Console](https://www.nuget.org/packages/Microsoft.Extensions.Logging.Console) - ãƒ­ã‚°ã‚’ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«å‡ºåŠ›ã—ã¾ã™ã€‚

</Pivot>
<Pivot id="nunit">

NUnit ã§ã¯ã€æ¬¡ã®ã‚ˆã†ãªãƒ­ã‚° ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®åˆ©ç”¨ãŒè€ƒãˆã‚‰ã‚Œã¾ã™:

- [ğŸ“¦ Extensions.Logging.NUnit](https://www.nuget.org/packages/Extensions.Logging.NUnit) - NUnit ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¨çµ±åˆã§ãã¾ã™ã€‚
- [ğŸ“¦ Serilog.Extensions.Logging.File](https://www.nuget.org/packages/Serilog.Extensions.Logging.File) - ãƒ­ã‚°ã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«å‡ºåŠ›ã—ã¾ã™ã€‚
- [ğŸ“¦ Microsoft.Extensions.Logging.Console](https://www.nuget.org/packages/Microsoft.Extensions.Logging.Console) - ãƒ­ã‚°ã‚’ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«å‡ºåŠ›ã—ã¾ã™ã€‚

</Pivot>

## Summary

Aspire ã®ãƒ†ã‚¹ãƒˆ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ã†ã“ã¨ã§ã€Aspire ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³å‘ã‘ã®ãƒ†ã‚¹ãƒˆ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ç°¡å˜ã«ä½œæˆã§ãã¾ã™ã€‚ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã«ã¯ã‚µãƒ³ãƒ—ãƒ« ãƒ†ã‚¹ãƒˆãŒå«ã¾ã‚Œã¦ãŠã‚Šã€ãã‚Œã‚’å‡ºç™ºç‚¹ã¨ã—ã¦ç‹¬è‡ªã®ãƒ†ã‚¹ãƒˆã‚’ä½œæˆã§ãã¾ã™ã€‚`DistributedApplicationTestingBuilder` ã¯ã€ASP.NET Core ã«ãŠã‘ã‚‹ `WebApplicationFactory<T>` ã¨ã‚ˆãä¼¼ãŸãƒ‘ã‚¿ãƒ¼ãƒ³ã«å¾“ã£ã¦è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚åˆ†æ•£ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã®ãƒ†ã‚¹ãƒˆ ãƒ›ã‚¹ãƒˆã‚’ä½œæˆã—ã€ãã‚Œã«å¯¾ã—ã¦ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã§ãã‚‹ç‚¹ãŒç‰¹é•·ã§ã™ã€‚

ã¾ãŸã€`DistributedApplicationTestingBuilder` ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€ã™ã¹ã¦ã®ãƒªã‚½ãƒ¼ã‚¹ ãƒ­ã‚°ã¯æ—¢å®šã§ `DistributedApplication` ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã•ã‚Œã¾ã™ã€‚ã“ã®ä»•çµ„ã¿ã«ã‚ˆã‚Šã€ç‰¹å®šã®ãƒªã‚½ãƒ¼ã‚¹ãŒæ­£ã—ããƒ­ã‚°ã‚’å‡ºåŠ›ã—ã¦ã„ã‚‹ã‹ã©ã†ã‹ã‚’ãƒ†ã‚¹ãƒˆã§æ¤œè¨¼ã™ã‚‹ã€ã¨ã„ã£ãŸã‚·ãƒŠãƒªã‚ªã‚‚å®Ÿç¾ã§ãã¾ã™ã€‚
